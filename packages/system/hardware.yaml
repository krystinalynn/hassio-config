###########################################
#                                         #
# This package contains the components,   #
# and sensors for monitoring the hardware #
# I have connected to my homeassistant    #
#                                         #
###########################################


homeassistant:
  customize:
    switch.lounge_tv_switch:
      homebridge_visible: true
    
    sensor.lounge_tv_energy_usage:
      homebridge_visible: true

    sensor.lounge_tv_operation_state:
      homebridge_visible: true
        
  customize_glob:
    media_player.*:
      icon: mdi:play
      homebridge_visible: true


media_player:
  - platform: webostv
    host: !secret lounge_tv_ip
    turn_on_action:
      service: wake_on_lan.send_magic_packet
      data:
        mac: !secret lounge_tv_mac

sensor:
  - platform: mqtt
    name: Lounge TV Energy Usage
    state_topic: smartthings/Lounge TV Outlet/power/state
    unit_of_measurement: W
    icon: mdi:power-socket-uk
    retain: 
    
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'time_utc'

switch:
  - platform: mqtt
    name: Lounge TV Switch
    command_topic: 'smartthings/Lounge TV Outlet/switch/cmd'
    state_topic: 'smartthings/Lounge TV Outlet/switch/state'
    payload_on: 'on'
    payload_off: 'off'
    icon: mdi:power-socket-uk
    retain: true

binary_sensor:
  - platform: template
    sensors:
      lounge_tv_operation_state:
        friendly_name: Lounge TV operation state
        device_class: power
        value_template: >-
          {{ states.sensor.lounge_tv_energy_usage.state | float >= 50 }}


group:
  date_time:
    name: Date and Time
    icon: mdi:calendar-clock
    entities:
      - sensor.time
      - sensor.date
      - sensor.time_utc


zwave:
  usb_path: /dev/ttyACM0
  network_key: !secret zwave_network_key
  autoheal: false


mqtt:
  broker: core-mosquitto
  username: !secret mqtt_user_hassio
  password: !secret mqtt_password_hassio
  discovery: true
  discovery_prefix: homeassistant